!function(){"use strict";class e{constructor(e,t,s,r,n){this._name=e.name,this._link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._cardSelector=t,this._handleCardClick=s,this._handleDeleteClick=r,this._handleLikeClick=n}_setEventListeners(){this._likebutton.addEventListener("click",(()=>this._handleLikeClick(this))),this._trashbutton.addEventListener("click",(()=>this._handleDeleteClick(this))),this._cardImageEl.addEventListener("click",(()=>this._handleCardClick(this._name,this._link)))}handleLikeIcon(){this._likebutton.classList.toggle("card__like-button_active")}_toggleLike(){this._isLiked?this._likebutton.classList.add("card__like-button_active"):this._likebutton.classList.remove("card__like-button_active")}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._likebutton=this._cardElement.querySelector(".card__like-button"),this._trashbutton=this._cardElement.querySelector(".card__delete-button"),this._cardImageEl.src=this._link,this._cardTitleEl.textContent=this._name,this._cardImageEl.alt=this._name,this._setEventListeners(),this._toggleLike(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_setEventListeners(){this._inputEls=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputEls)}))}))}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e,e.validationMessage);this._hideInputError(e)}_showInputError(e,t){const s=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}_toggleButtonState(e){this._hasInvalidInput(e)?this.disableButton():this._enableButton()}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_showInputError(e,t){const s=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=e.validationMessage,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popUpSelector:t}=e;this._popUpElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popUpElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popUpElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_handleOverlay(e){e.target.classList.contains("modal_open")&&this.close()}setEventListeners(){this._closeButton=this._popUpElement.querySelector(".modal__close"),this._closeButton.addEventListener("click",(()=>{this.close()})),this._popUpElement.addEventListener("click",(e=>{this._handleOverlay(e)}))}}class r extends s{constructor(e,t){super({popUpSelector:e}),this._popUpForm=this._popUpElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputEls=Array.from(this._popUpForm.querySelectorAll(".modal__input")),this._submitBtn=this._popUpForm.querySelector(".modal__button")}close(){this._popUpForm.reset(),super.close()}_getInputValues(){const e={};return this._inputEls.forEach((t=>{e[t.name]=t.value})),e}renderLoading(e){this._submitBtn.textContent=e?"Saving...":"Save"}setEventListeners(){super.setEventListeners(),this._popUpForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}class n{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(e,t){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=document.querySelector("#edit-modal"),a=document.querySelector("#add-card-modal"),l=document.forms.profile__form,c=a.querySelector(".modal__form"),d=document.forms.avatar__form,h=(document.forms["modal__delete-form"].querySelector(".modal-delete-button"),document.querySelector("#profile-edit-button")),_=(o.querySelector(".modal__close"),a.querySelector(".modal__close"),document.querySelector(".profile__add-button")),u=document.querySelector(".profile__avatar-button"),m=(document.querySelector(".card__delete-button"),c.querySelector("#card-name-input"),c.querySelector("#card-link-input"),d.querySelector("#avatar-link-input"),new class{constructor(e){let{headers:t,baseUrl:s}=e;this._headers=t,this._baseUrl=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}createCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkResponse)}updateUserInfo(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkResponse)}updateUserAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse).then((()=>console.log("Card has been deleted")))}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse).then((()=>console.log("Card has been liked")))}dislikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse).then((()=>console.log("Card has been disliked")))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"298dccb5-56b1-425a-ba81-960441ee84bf","Content-Type":"application/json"}})),p=new r("#edit-avatar-modal",(function(e){p.renderLoading(!0),m.updateUserAvatar(e.link).then((e=>{B.setUserAvatar(e.avatar)})).then((()=>{console.log("Avatar has been updated"),v.disableButton(),p.close()})).catch((e=>{console.error(e)})).finally((()=>{p.renderLoading(!1)}))}));p.setEventListeners();const E=new t(i,l),b=new t(i,c),v=new t(i,d);function k(t){return new e(t,"#card-template",U,x,A).getView()}E.enableValidation(),b.enableValidation(),E.disableButton(),b.disableButton(),v.enableValidation(),v.disableButton();const f=document.querySelector(".profile__name"),L=document.querySelector(".profile__description"),S=document.querySelector(".profile__image"),C=document.querySelector("#profile-name-input"),y=document.querySelector("#profile-description-input");h.addEventListener("click",(()=>{I.open();const e=B.getUserInfo();C.value=e.name,y.value=e.job})),_.addEventListener("click",(()=>{q.open()}));const g=new class extends s{constructor(e){super({popUpSelector:e}),this._popUpImage=this._popUpElement.querySelector(".modal__image"),this._popUpCaption=this._popUpElement.querySelector(".modal__caption")}open(e,t){this._popUpImage.src=t,this._popUpImage.alt=e,this._popUpCaption.textContent=e,super.open()}}("#card-image-modal");function U(e,t){return g.open(e,t)}g.setEventListeners();const I=new r("#edit-modal",(function(e){I.renderLoading(!0),m.updateUserInfo(e.name,e.link).then((()=>{B.setUserInfo(e.name,e.link)})).then((()=>{E.disableButton(),I.close()})).catch((e=>{console.log(e)})).finally((()=>{I.renderLoading(!1)}))})),q=new r("#add-card-modal",(function(e){q.renderLoading(!0),m.createCard(e.name,e.link).then((e=>{const t=k(e);w.addItem(t),q.close(),b.disableButton()})).catch((e=>{console.error(`The error is ${e}`)})).finally((()=>{q.renderLoading(!1)}))}));I.setEventListeners(),q.setEventListeners();const B=new class{constructor(e,t,s){this._userName=e,this._userJob=t,this._userAvatar=s}getUserInfo(){return{name:this._userName.textContent,job:this._userJob.textContent,avatar:this._userAvatar.src}}setUserInfo(e,t){this._userName.textContent=e,this._userJob.textContent=t}setUserAvatar(e){this._userAvatar.src=e}}(f,L,S);let w;m.getInitialCards().then((e=>{w=new n({items:e,renderer:e=>{const t=k(e);w.addItem(t)}},".cards__list"),w.renderItems()})).catch((e=>{console.error(e)})),m.getUserInfo().then((e=>{B.setUserInfo(e.name,e.about),B.setUserAvatar(e.avatar)})).catch((e=>{console.error(e)}));const $=new class extends s{constructor(e){super({popUpSelector:e}),this._popUpForm=this._popUpElement.querySelector(".modal__form")}handleDelete(e){this._handleDeleteSubmit=e}setEventListeners(){super.setEventListeners(),this._popUpForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleDeleteSubmit()}))}}("#delete-card-modal");function A(e){console.log(e),e.isLiked&&m.dislikeCard(e._id).then((()=>{e.handleLikeIcon(),e.isLiked=!1})).catch((e=>{console.error(e)})),e.isLiked||m.likeCard(e._id).then((()=>{e.handleLikeIcon(),e.isLiked=!0})).catch((e=>{console.error(e)}))}function x(e){$.open(),console.log(e._id),$.handleDelete((()=>{m.deleteCard(e._id).then((()=>{e.handleDeleteCard(),$.close()})).catch((e=>{console.error(e)}))}))}$.setEventListeners(),u.addEventListener("click",(()=>{p.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXakYsaUJBQWlCLFVBQVd1RSxJQUMxQ0EsRUFBSVYsaUJBQ0ozRSxLQUFLcU0scUJBQXFCLEdBRTlCLEdKc01BLHNCQVVGLFNBQVN0TSxFQUFnQjBMLEdBQ3ZCL0IsUUFBUUMsSUFBSThCLEdBQ1JBLEVBQUtsTCxTQUNQeUgsRUFBSTZCLFlBQVk0QixFQUFLcEwsS0FBS3lJLE1BQUssS0FFN0IyQyxFQUFLeEssaUJBQ0x3SyxFQUFLbEwsU0FBVSxDQUFLLElBRXJCNEosT0FBT0MsSUFBU1YsUUFBUVcsTUFBTUQsRUFBSSxJQUVoQ3FCLEVBQUtsTCxTQUNSeUgsRUFBSTRCLFNBQVM2QixFQUFLcEwsS0FBS3lJLE1BQUssS0FFMUIyQyxFQUFLeEssaUJBQ0x3SyxFQUFLbEwsU0FBVSxDQUFJLElBRXBCNEosT0FBT0MsSUFDTlYsUUFBUVcsTUFBTUQsRUFBSSxHQUd4QixDQUtBLFNBQVNLLEVBQWlCZ0IsR0FDeEJTLEVBQWdCaEgsT0FDaEJ3RSxRQUFRQyxJQUFJOEIsRUFBS3BMLEtBQ2pCNkwsRUFBZ0JDLGNBQWEsS0FDN0JuRSxFQUNHeUIsV0FBV2dDLEVBQUtwTCxLQUNoQnlJLE1BQUssS0FDSjJDLEVBQUtsSyxtQkFDTDJLLEVBQWdCL0csT0FBTyxJQUV4QmdGLE9BQU9DLElBQ05WLFFBQVFXLE1BQU1ELEVBQUksR0FDbEIsR0FFTixDQTlDQThCLEVBQWdCeEcsb0JBR2hCcUMsRUFBbUJqSCxpQkFBaUIsU0FBUyxLQUMzQ2lKLEVBQWdCN0UsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcFVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcFVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wVXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wVXBXaXRoQ29uZmlybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGRhdGEuaXNMaWtlZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjsgLy8gY2FyZFNlbGVjdG9yID0gXCJnI2NhcmQtdGVtcGxhdGVcIlxyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl90cmFzaGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcykgXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2xpa2VidXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcbiAgX3RvZ2dsZUxpa2UoKSB7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2xpa2VidXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fdHJhc2hidXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl90b2dnbGVMaWtlKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0RWxzKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIiBcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbGVtZW50cykge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dEVsZW1lbnRzKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9lbmFibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiAhaW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsLCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsLmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCIgXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcFVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wVXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3BVcFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcblxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3BVcEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5cIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG5cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBfaGFuZGxlT3ZlcmxheShldnQpIHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5cIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fcG9wVXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZU92ZXJsYXkoZXZ0KTtcclxuICAgICAgfSk7XHJcblxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wVXAgZnJvbSBcIi4vUG9wVXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwV2l0aEZvcm0gZXh0ZW5kcyBQb3BVcCB7XHJcbiAgY29uc3RydWN0b3IocG9wVXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3BVcFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wVXBGb3JtID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fcG9wVXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0biA9IHRoaXMuX3BvcFVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgICAgIH1cclxuICBcclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3BVcEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgIGZvcm1WYWx1ZXNbZWxlbWVudC5uYW1lXSA9IGVsZW1lbnQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcFVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICA7XHJcbiAgICB9KVxyXG4gIFxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXIpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXIpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMsIHJlbmRlcmVyKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAvKiByZXR1cm4gZWxlbWVudDsgKi9cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiLy92YWxpZGF0aW9uXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL2NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3BVcFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3BVcFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3BVcFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IFBvcFVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wVXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wVXBXaXRoQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3BVcFdpdGhDb25maXJtLmpzXCI7XHJcbmltcG9ydCB7IHZhbGlkYXRpb25TZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcclxuXHJcblxyXG4vL1xyXG4vL1dyYXBwZXJzXHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZV9fZm9ybVwiXTtcclxuY29uc3QgYWRkQ2FyZEZvcm0gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuY29uc3QgYXZhdGFyVXBkYXRlRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYXZhdGFyX19mb3JtXCJdO1xyXG5jb25zdCBkZWxldGVDYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wibW9kYWxfX2RlbGV0ZS1mb3JtXCJdO1xyXG5jb25zdCBtb2RhbERlbGV0ZUJ0biA9IGRlbGV0ZUNhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtZGVsZXRlLWJ1dHRvblwiKTtcclxuLy9CdXR0b25zIGFuZCBET00gbm9kZXNcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVNb2RhbENsb3NlQnV0dG9uID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbmNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IGF2YXRhclVwZGF0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ1dHRvblwiKTtcclxuLy9Gb3JtIERhdGFcclxuY29uc3QgdHJhc2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIiNjYXJkLW5hbWUtaW5wdXRcIik7XHJcbmNvbnN0IGNhcmRVcmxJbnB1dCA9IGFkZENhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1saW5rLWlucHV0XCIpO1xyXG5jb25zdCBhdmF0YXJVcmxJbnB1dCA9IGF2YXRhclVwZGF0ZUZvcm0ucXVlcnlTZWxlY3RvcihcIiNhdmF0YXItbGluay1pbnB1dFwiKTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjI5OGRjY2I1LTU2YjEtNDI1YS1iYTgxLTk2MDQ0MWVlODRiZlwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCBhdmF0YXJDYXJkUG9wVXAgPSBuZXcgUG9wVXBXaXRoRm9ybShcclxuICBcIiNlZGl0LWF2YXRhci1tb2RhbFwiLFxyXG4gIGhhbmRsZUF2YXRhclN1Ym1pdFxyXG4pO1xyXG5cclxuYXZhdGFyQ2FyZFBvcFVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBwcm9maWxlRWRpdEZvcm1cclxuKTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xyXG5jb25zdCB1cGRhdGVBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgYXZhdGFyVXBkYXRlRm9ybVxyXG4pO1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxudXBkYXRlQXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxudXBkYXRlQXZhdGFyVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxuXHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGl0ZW0pIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxyXG4gICAgaXRlbSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIGRlbGV0ZUNhcmRTdWJtaXQsXHJcbiAgICBoYW5kbGVMaWtlQ2xpY2tcclxuICApO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KHVzZXJQcm9maWxlKSB7XHJcbiAgcG9wVXBXaXRoRWRpdEZvcm0ucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgYXBpXHJcbiAgICAudXBkYXRlVXNlckluZm8odXNlclByb2ZpbGUubmFtZSwgdXNlclByb2ZpbGUubGluaylcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgdXNlckRhdGEuc2V0VXNlckluZm8odXNlclByb2ZpbGUubmFtZSwgdXNlclByb2ZpbGUubGluayk7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBlZGl0Rm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICAgIHBvcFVwV2l0aEVkaXRGb3JtLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcFVwV2l0aEVkaXRGb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhclN1Ym1pdChkYXRhKSB7XHJcbiAgYXZhdGFyQ2FyZFBvcFVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgXHJcbiAgYXBpXHJcbiAgICAudXBkYXRlVXNlckF2YXRhcihkYXRhLmxpbmspXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJEYXRhLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICB9KVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkF2YXRhciBoYXMgYmVlbiB1cGRhdGVkXCIpO1xyXG4gICAgICB1cGRhdGVBdmF0YXJWYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgICBhdmF0YXJDYXJkUG9wVXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBhdmF0YXJDYXJkUG9wVXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgXHJcbn1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wVXBXaXRoRWRpdEZvcm0ub3BlbigpO1xyXG4gIGNvbnN0IHVzZXJQcm9maWxlID0gdXNlckRhdGEuZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTmFtZUlucHV0LnZhbHVlID0gdXNlclByb2ZpbGUubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJQcm9maWxlLmpvYjtcclxuICBcclxufSk7XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChkYXRhKSB7XHJcbiAgcG9wVXBXaXRoQWRkRm9ybS5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmNyZWF0ZUNhcmQoZGF0YS5uYW1lLCBkYXRhLmxpbmspXHJcbiAgICAudGhlbigocmVzdWx0cykgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChyZXN1bHRzKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcclxuICAgICAgcG9wVXBXaXRoQWRkRm9ybS5jbG9zZSgpO1xyXG4gICAgICBhZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBUaGUgZXJyb3IgaXMgJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3BVcFdpdGhBZGRGb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgXHJcbn1cclxuXHJcbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3BVcFdpdGhBZGRGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5cclxuY29uc3QgcG9wVXBJbWFnZUVsZW1lbnQgPSBuZXcgUG9wVXBXaXRoSW1hZ2UoXCIjY2FyZC1pbWFnZS1tb2RhbFwiKTtcclxucG9wVXBJbWFnZUVsZW1lbnQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XHJcbiAgcmV0dXJuIHBvcFVwSW1hZ2VFbGVtZW50Lm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbmNvbnN0IHBvcFVwV2l0aEVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcblxyXG5jb25zdCBwb3BVcFdpdGhBZGRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcclxuICBoYW5kbGVBZGRDYXJkU3VibWl0XHJcbik7XHJcblxyXG5wb3BVcFdpdGhFZGl0Rm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3BVcFdpdGhBZGRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuY29uc3QgdXNlckRhdGEgPSBuZXcgVXNlckluZm8ocHJvZmlsZU5hbWUsIHByb2ZpbGVEZXNjcmlwdGlvbiwgYXZhdGFyKTtcclxuXHJcbmxldCBjYXJkU2VjdGlvbjtcclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XHJcbiAgICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiBjYXJkRGF0YSxcclxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBcIi5jYXJkc19fbGlzdFwiXHJcbiAgICApO1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICB9KVxyXG5cclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXHJcbiAgfSk7XHJcblxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICB1c2VyRGF0YS5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpO1xyXG4gICAgdXNlckRhdGEuc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXHJcbiAgfSk7XHJcblxyXG5jb25zdCBkZWxldGVDYXJkUG9wVXAgPSBuZXcgUG9wVXBXaXRoQ29uZmlybShcclxuICBcIiNkZWxldGUtY2FyZC1tb2RhbFwiXHJcbik7XHJcblxyXG5kZWxldGVDYXJkUG9wVXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG5hdmF0YXJVcGRhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhdmF0YXJDYXJkUG9wVXAub3BlbigpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkKSB7XHJcbiAgY29uc29sZS5sb2coY2FyZClcclxuICBpZiAoY2FyZC5pc0xpa2VkKSB7XHJcbiAgICBhcGkuZGlzbGlrZUNhcmQoY2FyZC5faWQpLnRoZW4oKCkgPT4ge1xyXG4gICAgICBcclxuICAgICAgY2FyZC5oYW5kbGVMaWtlSWNvbigpO1xyXG4gICAgICBjYXJkLmlzTGlrZWQgPSBmYWxzZTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge2NvbnNvbGUuZXJyb3IoZXJyKTt9KVxyXG4gIH1cclxuICBpZiAoIWNhcmQuaXNMaWtlZCkge1xyXG4gICAgYXBpLmxpa2VDYXJkKGNhcmQuX2lkKS50aGVuKCgpID0+IHtcclxuICAgIFxyXG4gICAgICBjYXJkLmhhbmRsZUxpa2VJY29uKCk7XHJcbiAgICAgIGNhcmQuaXNMaWtlZCA9IHRydWU7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBkZWxldGVDYXJkU3VibWl0KGNhcmQpIHtcclxuICBkZWxldGVDYXJkUG9wVXAub3BlbigpO1xyXG4gIGNvbnNvbGUubG9nKGNhcmQuX2lkKVxyXG4gIGRlbGV0ZUNhcmRQb3BVcC5oYW5kbGVEZWxldGUoKCkgPT4ge1xyXG4gIGFwaVxyXG4gICAgLmRlbGV0ZUNhcmQoY2FyZC5faWQpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgICBkZWxldGVDYXJkUG9wVXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9KTtcclxuICB9KVxyXG59XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgaGVhZGVycywgYmFzZVVybCB9KSB7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNhcmQobmFtZSwgbGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVVc2VySW5mbyhuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICAgIFxyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckF2YXRhcihsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogbGluayxcclxuICAgICAgfSksXHJcbiAgICAgIFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pLnRoZW4oXHJcbiAgICAgIHRoaXMuX2NoZWNrUmVzcG9uc2VcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICAgIC50aGVuKCgpPT5jb25zb2xlLmxvZyhcIkNhcmQgaGFzIGJlZW4gZGVsZXRlZFwiKSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxyXG4gICAgICAudGhlbigoKT0+Y29uc29sZS5sb2coXCJDYXJkIGhhcyBiZWVuIGxpa2VkXCIpKTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXHJcbiAgICAgIC50aGVuKCgpPT5jb25zb2xlLmxvZyhcIkNhcmQgaGFzIGJlZW4gZGlzbGlrZWRcIikpO1xyXG4gIH1cclxuXHJcbiBcclxuICBcclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wVXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKCBwb3BVcFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7cG9wVXBTZWxlY3Rvcn0pO1xyXG5cclxuXHJcblxyXG4gICAgdGhpcy5fcG9wVXBJbWFnZSA9IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuXHJcbiAgICB0aGlzLl9wb3BVcENhcHRpb249IHRoaXMuX3BvcFVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9wb3BVcEltYWdlLnNyYyA9IGxpbms7XHJcblxyXG4gICAgdGhpcy5fcG9wVXBJbWFnZS5hbHQgPSBuYW1lO1xyXG5cclxuICAgIHRoaXMuX3BvcFVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcblxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuXHJcbiAgXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHVzZXJOYW1lLCB1c2VySm9iLCB1c2VyQXZhdGFyKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy5fdXNlckpvYiA9IHVzZXJKb2I7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyID0gdXNlckF2YXRhcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl91c2VyQXZhdGFyLnNyYyxcclxuICAgICAgXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgam9iKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgXHJcbiAgfVxyXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKXtcclxuICAgIHRoaXMuX3VzZXJBdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wVXAgZnJvbSBcIi4vUG9wVXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcFVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3BVcHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcFVwU2VsZWN0b3IpIHtcclxuXHJcbiAgICBzdXBlcih7cG9wVXBTZWxlY3Rvcn0pO1xyXG4gICAgdGhpcy5fcG9wVXBGb3JtID0gdGhpcy5fcG9wVXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuXHJcbiAgaGFuZGxlRGVsZXRlKGhhbmRsZURlbGV0ZVN1Ym1pdCkge1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlU3VibWl0PSBoYW5kbGVEZWxldGVTdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3BVcEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVTdWJtaXQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX3RyYXNoYnV0dG9uIiwiX2NhcmRJbWFnZUVsIiwiaGFuZGxlTGlrZUljb24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfdG9nZ2xlTGlrZSIsImFkZCIsInJlbW92ZSIsImhhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJnZXRWaWV3IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jYXJkVGl0bGVFbCIsInNyYyIsInRleHRDb250ZW50IiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0RWxzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXRFbCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiaW5wdXRFbGVtZW50cyIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiaW5wdXRMaXN0IiwiZXZlcnkiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiUG9wVXAiLCJfcmVmIiwicG9wVXBTZWxlY3RvciIsIl9wb3BVcEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsIl9oYW5kbGVPdmVybGF5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJzZXRFdmVudExpc3RlbmVycyIsIl9jbG9zZUJ1dHRvbiIsIlBvcFVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wVXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfc3VibWl0QnRuIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwiZWxlbWVudCIsInZhbHVlIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImV2ZW50IiwiU2VjdGlvbiIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlRWRpdE1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwiZm9ybXMiLCJhZGRDYXJkRm9ybSIsImF2YXRhclVwZGF0ZUZvcm0iLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZE5ld0NhcmRCdXR0b24iLCJhdmF0YXJVcGRhdGVCdXR0b24iLCJhcGkiLCJoZWFkZXJzIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiX2Jhc2VVcmwiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwidGhlbiIsImNyZWF0ZUNhcmQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVVzZXJJbmZvIiwiYWJvdXQiLCJ1cGRhdGVVc2VyQXZhdGFyIiwiYXZhdGFyIiwiZ2V0SW5pdGlhbENhcmRzIiwiZGVsZXRlQ2FyZCIsImNvbnNvbGUiLCJsb2ciLCJsaWtlQ2FyZCIsImRpc2xpa2VDYXJkIiwiYXV0aG9yaXphdGlvbiIsImF2YXRhckNhcmRQb3BVcCIsInVzZXJEYXRhIiwic2V0VXNlckF2YXRhciIsInVwZGF0ZUF2YXRhclZhbGlkYXRvciIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJmaW5hbGx5IiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiZGVsZXRlQ2FyZFN1Ym1pdCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwicG9wVXBXaXRoRWRpdEZvcm0iLCJ1c2VyUHJvZmlsZSIsImpvYiIsInBvcFVwV2l0aEFkZEZvcm0iLCJwb3BVcEltYWdlRWxlbWVudCIsIlBvcHVwIiwiX3BvcFVwSW1hZ2UiLCJfcG9wVXBDYXB0aW9uIiwiUG9wdXBXaXRoRm9ybSIsInNldFVzZXJJbmZvIiwicmVzdWx0cyIsImNhcmQiLCJjYXJkU2VjdGlvbiIsInVzZXJOYW1lIiwidXNlckpvYiIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsIl91c2VyQXZhdGFyIiwiY2FyZERhdGEiLCJkZWxldGVDYXJkUG9wVXAiLCJoYW5kbGVEZWxldGUiLCJoYW5kbGVEZWxldGVTdWJtaXQiLCJfaGFuZGxlRGVsZXRlU3VibWl0Il0sInNvdXJjZVJvb3QiOiIifQ==